# Template VibeKanban: An√°lise de V√≠deo Instagram
# Vers√£o: 1.0.0
# Descri√ß√£o: Template completo para an√°lise de v√≠deos do Instagram usando MCP

name: "An√°lise de V√≠deo Instagram"
description: "Template para an√°lise completa de v√≠deos do Instagram com IA"
version: "1.0.0"
author: "Instagram Video Analyzer Team"
tags: ["instagram", "video", "analysis", "ai", "mcp"]

# Vari√°veis do template
variables:
  - name: "video_url"
    description: "URL do v√≠deo do Instagram"
    type: "string"
    required: true
    validation:
      pattern: "^https?://(www\\.)?(instagram\\.com|instagr\\.am)/.+"
      message: "URL deve ser do Instagram"
    
  - name: "analysis_type"
    description: "Tipo de an√°lise a ser realizada"
    type: "select"
    required: false
    default: "comprehensive"
    options:
      - value: "comprehensive"
        label: "An√°lise Completa"
        description: "An√°lise detalhada com todos os aspectos"
      - value: "summary"
        label: "Resumo"
        description: "Resumo conciso do conte√∫do"
      - value: "transcription"
        label: "Transcri√ß√£o"
        description: "Transcri√ß√£o completa do √°udio"
      - value: "visual_description"
        label: "Descri√ß√£o Visual"
        description: "Descri√ß√£o detalhada dos elementos visuais"
    
  - name: "project_name"
    description: "Nome do projeto (opcional)"
    type: "string"
    required: false
    default: "An√°lise Instagram"
    
  - name: "output_format"
    description: "Formato de sa√≠da desejado"
    type: "select"
    required: false
    default: "markdown"
    options:
      - value: "markdown"
        label: "Markdown"
      - value: "json"
        label: "JSON"
      - value: "txt"
        label: "Texto Simples"

# Configura√ß√µes do template
settings:
  max_concurrent_tasks: 3
  timeout_minutes: 15
  retry_failed_tasks: true
  save_artifacts: true
  notification_channels: ["slack", "email"]

# Tarefas do workflow
tasks:
  - id: "validate_url"
    name: "Validar URL do Instagram"
    description: "Valida se a URL fornecida √© um v√≠deo v√°lido do Instagram"
    agent: "claude-code"
    priority: "high"
    estimated_duration: "30s"
    
    prompt: |
      Valide esta URL do Instagram: {{video_url}}
      
      Verifica√ß√µes necess√°rias:
      1. ‚úÖ URL √© do Instagram (instagram.com ou instagr.am)
      2. ‚úÖ Aponta para um v√≠deo (reel, IGTV, post com v√≠deo)
      3. ‚úÖ URL est√° acess√≠vel e bem formada
      4. ‚úÖ N√£o √© conte√∫do privado ou restrito
      
      Use o MCP server instagram-video-analyzer para verificar:
      ```
      get_video_info("{{video_url}}")
      ```
      
      Responda apenas:
      - "‚úÖ V√ÅLIDA" se tudo estiver correto
      - "‚ùå INV√ÅLIDA: [motivo]" se houver problemas
      
      Inclua informa√ß√µes b√°sicas do v√≠deo se v√°lida.
    
    outputs:
      - name: "validation_result"
        description: "Resultado da valida√ß√£o"
      - name: "video_info"
        description: "Informa√ß√µes b√°sicas do v√≠deo"
    
    success_criteria:
      - "Valida√ß√£o conclu√≠da"
      - "URL confirmada como v√°lida"
    
    error_handling:
      retry_count: 2
      fallback_action: "manual_review"

  - id: "analyze_video"
    name: "Analisar V√≠deo com IA"
    description: "Executa a an√°lise do v√≠deo usando o MCP server"
    agent: "claude-code"
    depends_on: ["validate_url"]
    priority: "high"
    estimated_duration: "3-5min"
    
    prompt: |
      Execute a an√°lise do v√≠deo usando o MCP server instagram-video-analyzer:
      
      **Configura√ß√£o da An√°lise:**
      - URL: {{video_url}}
      - Tipo: {{analysis_type}}
      - Projeto: {{project_name}}
      
      **Comando MCP:**
      ```
      analyze_instagram_video(
        url="{{video_url}}",
        analysis_type="{{analysis_type}}"
      )
      ```
      
      **Instru√ß√µes:**
      1. üöÄ Inicie a an√°lise usando o comando acima
      2. ‚è≥ Monitore o progresso do job
      3. üìä Aguarde a conclus√£o (pode levar alguns minutos)
      4. ‚úÖ Confirme que a an√°lise foi bem-sucedida
      5. üìù Extraia os principais insights
      
      **Formato de Resposta:**
      - Status da an√°lise
      - Job ID para refer√™ncia
      - Resumo dos principais insights
      - Tempo de processamento
      
      Se houver erro, use `get_job_status(job_id)` para diagnosticar.
    
    outputs:
      - name: "analysis_result"
        description: "Resultado completo da an√°lise"
      - name: "job_id"
        description: "ID do job para refer√™ncia"
      - name: "insights_summary"
        description: "Resumo dos principais insights"
    
    success_criteria:
      - "An√°lise conclu√≠da com sucesso"
      - "Insights extra√≠dos"
      - "Job ID registrado"
    
    error_handling:
      retry_count: 1
      timeout_action: "cancel_and_retry"
      fallback_action: "partial_analysis"

  - id: "generate_report"
    name: "Gerar Relat√≥rio Estruturado"
    description: "Cria um relat√≥rio estruturado com base na an√°lise"
    agent: "claude-code"
    depends_on: ["analyze_video"]
    priority: "medium"
    estimated_duration: "1-2min"
    
    prompt: |
      Com base na an√°lise do v√≠deo anterior, crie um relat√≥rio estruturado:
      
      **Dados da An√°lise:**
      - URL: {{video_url}}
      - Tipo: {{analysis_type}}
      - Job ID: {{analyze_video.job_id}}
      - Projeto: {{project_name}}
      
      **Estrutura do Relat√≥rio ({{output_format}}):**
      
      # üìä Relat√≥rio de An√°lise - {{project_name}}
      
      ## üìã Informa√ß√µes Gerais
      - **URL**: {{video_url}}
      - **Tipo de An√°lise**: {{analysis_type}}
      - **Data**: [data atual]
      - **Job ID**: {{analyze_video.job_id}}
      
      ## üéØ Resumo Executivo
      [Resumo de 2-3 par√°grafos dos principais insights]
      
      ## üìù An√°lise Detalhada
      [Conte√∫do completo da an√°lise organizado por se√ß√µes]
      
      ## üîç Insights Principais
      - [Insight 1]
      - [Insight 2]
      - [Insight 3]
      
      ## üìä M√©tricas e Dados
      - **Dura√ß√£o do Processamento**: [tempo]
      - **Modelo IA Usado**: [modelo]
      - **Tamanho do Arquivo**: [tamanho]
      
      ## üí° Recomenda√ß√µes
      [Recomenda√ß√µes baseadas na an√°lise]
      
      ## üìé Anexos
      - Link para an√°lise completa
      - Dados t√©cnicos
      
      Salve como: `relatorio_{{project_name | slug}}_{{timestamp}}.{{output_format}}`
    
    outputs:
      - name: "report_file"
        description: "Arquivo do relat√≥rio gerado"
      - name: "report_summary"
        description: "Resumo do relat√≥rio"
    
    success_criteria:
      - "Relat√≥rio gerado com sucesso"
      - "Arquivo salvo corretamente"
      - "Estrutura completa"

  - id: "create_social_content"
    name: "Criar Conte√∫do para Redes Sociais"
    description: "Gera conte√∫do otimizado para diferentes redes sociais"
    agent: "claude-code"
    depends_on: ["analyze_video"]
    priority: "low"
    estimated_duration: "1min"
    
    prompt: |
      Baseado na an√°lise do v√≠deo, crie conte√∫do otimizado para redes sociais:
      
      **Dados da An√°lise:**
      {{analyze_video.insights_summary}}
      
      **Conte√∫do a Criar:**
      
      ## üì± LinkedIn Post (m√°x 1300 caracteres)
      [Post profissional destacando insights principais]
      
      ## üê¶ Thread Twitter (m√°x 280 chars por tweet)
      Tweet 1: [Hook principal]
      Tweet 2: [Insight 1]
      Tweet 3: [Insight 2]
      Tweet 4: [Conclus√£o + CTA]
      
      ## üì∫ Descri√ß√£o YouTube (m√°x 5000 caracteres)
      [Descri√ß√£o detalhada para v√≠deo de an√°lise]
      
      ## üìã Resumo para Apresenta√ß√£o
      [Bullet points para slides]
      
      **Hashtags Sugeridas:**
      #VideoAnalysis #InstagramMarketing #AIInsights #ContentStrategy
      
      Foque nos insights mais valiosos e actionable.
    
    outputs:
      - name: "social_content"
        description: "Conte√∫do para redes sociais"
      - name: "hashtags"
        description: "Hashtags sugeridas"
    
    success_criteria:
      - "Conte√∫do criado para todas as plataformas"
      - "Respeitados os limites de caracteres"
      - "Hashtags relevantes inclu√≠das"

  - id: "archive_results"
    name: "Arquivar Resultados"
    description: "Organiza e arquiva todos os resultados da an√°lise"
    agent: "claude-code"
    depends_on: ["generate_report", "create_social_content"]
    priority: "low"
    estimated_duration: "30s"
    
    prompt: |
      Organize e arquive todos os resultados da an√°lise:
      
      **Estrutura de Arquivos:**
      ```
      {{project_name | slug}}/
      ‚îú‚îÄ‚îÄ relatorio_principal.{{output_format}}
      ‚îú‚îÄ‚îÄ conteudo_redes_sociais.md
      ‚îú‚îÄ‚îÄ dados_tecnicos.json
      ‚îú‚îÄ‚îÄ insights_principais.txt
      ‚îî‚îÄ‚îÄ metadados.yml
      ```
      
      **Metadados a Incluir:**
      - URL original
      - Tipo de an√°lise
      - Job ID
      - Timestamp
      - Dura√ß√£o total do processo
      - Status de cada tarefa
      
      **A√ß√µes:**
      1. üìÅ Criar estrutura de diret√≥rios
      2. üíæ Salvar todos os arquivos
      3. üìã Gerar √≠ndice de conte√∫do
      4. ‚úÖ Verificar integridade dos arquivos
      5. üìä Atualizar estat√≠sticas do projeto
      
      Confirme que todos os arquivos foram salvos corretamente.
    
    outputs:
      - name: "archive_path"
        description: "Caminho do arquivo"
      - name: "file_list"
        description: "Lista de arquivos criados"
    
    success_criteria:
      - "Todos os arquivos arquivados"
      - "Estrutura de diret√≥rios criada"
      - "Metadados completos"

# Configura√ß√µes de notifica√ß√£o
notifications:
  on_start:
    message: "üöÄ Iniciando an√°lise de v√≠deo Instagram: {{video_url}}"
    channels: ["slack"]
  
  on_complete:
    message: "‚úÖ An√°lise conclu√≠da! Relat√≥rio dispon√≠vel em: {{archive_results.archive_path}}"
    channels: ["slack", "email"]
  
  on_error:
    message: "‚ùå Erro na an√°lise: {{error_message}}"
    channels: ["slack"]

# M√©tricas e KPIs
metrics:
  - name: "tempo_total_processamento"
    description: "Tempo total do workflow"
    unit: "minutes"
  
  - name: "taxa_sucesso_validacao"
    description: "Taxa de sucesso na valida√ß√£o de URLs"
    unit: "percentage"
  
  - name: "qualidade_insights"
    description: "Qualidade dos insights gerados"
    unit: "score"

# Configura√ß√µes de cleanup
cleanup:
  auto_cleanup: true
  retention_days: 30
  archive_completed: true
  delete_temp_files: true
