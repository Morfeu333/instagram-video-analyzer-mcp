# Template VibeKanban: Monitoramento Cont√≠nuo de V√≠deos
# Vers√£o: 1.0.0
# Descri√ß√£o: Template para monitoramento autom√°tico e an√°lise cont√≠nua

name: "Monitoramento Cont√≠nuo de V√≠deos Instagram"
description: "Monitora e analisa automaticamente novos v√≠deos de contas espec√≠ficas"
version: "1.0.0"
author: "Instagram Video Analyzer Team"
tags: ["monitoring", "automation", "continuous", "instagram", "analysis"]

# Vari√°veis do template
variables:
  - name: "target_accounts"
    description: "Contas do Instagram para monitorar (uma por linha)"
    type: "text"
    required: true
    validation:
      pattern: "^@[a-zA-Z0-9._]+$"
      message: "Use formato @username"
    
  - name: "monitoring_frequency"
    description: "Frequ√™ncia de verifica√ß√£o"
    type: "select"
    required: false
    default: "daily"
    options:
      - value: "hourly"
        label: "A cada hora"
      - value: "daily"
        label: "Diariamente"
      - value: "weekly"
        label: "Semanalmente"
    
  - name: "analysis_triggers"
    description: "Gatilhos para an√°lise autom√°tica"
    type: "multiselect"
    required: false
    default: ["new_video", "high_engagement"]
    options:
      - value: "new_video"
        label: "Novo v√≠deo publicado"
      - value: "high_engagement"
        label: "Alto engajamento"
      - value: "trending_hashtag"
        label: "Hashtag em trending"
      - value: "competitor_activity"
        label: "Atividade de concorrente"
    
  - name: "alert_thresholds"
    description: "Limites para alertas"
    type: "object"
    required: false
    default:
      engagement_rate: 5.0
      view_count: 10000
      comment_rate: 2.0
    
  - name: "report_frequency"
    description: "Frequ√™ncia de relat√≥rios"
    type: "select"
    required: false
    default: "weekly"
    options:
      - value: "daily"
        label: "Di√°rio"
      - value: "weekly"
        label: "Semanal"
      - value: "monthly"
        label: "Mensal"

# Tarefas do workflow (executadas em loop)
tasks:
  - id: "check_new_content"
    name: "Verificar Novo Conte√∫do"
    description: "Verifica se h√° novos v√≠deos nas contas monitoradas"
    agent: "claude-code"
    priority: "high"
    estimated_duration: "2min"
    schedule: "{{monitoring_frequency}}"
    
    prompt: |
      Verifique novos v√≠deos nas contas monitoradas:
      
      **Contas para Monitorar:**
      ```
      {{target_accounts}}
      ```
      
      **Processo de Verifica√ß√£o:**
      
      1. üîç Para cada conta na lista:
         - Verificar √∫ltimos posts
         - Identificar novos v√≠deos desde √∫ltima verifica√ß√£o
         - Coletar metadados b√°sicos
      
      2. üìä Coletar m√©tricas iniciais:
         - N√∫mero de visualiza√ß√µes
         - Curtidas e coment√°rios
         - Hashtags utilizadas
         - Hor√°rio de publica√ß√£o
      
      3. üéØ Aplicar filtros de gatilho:
         ```
         Gatilhos ativos: {{analysis_triggers}}
         ```
      
      4. üìã Gerar lista de v√≠deos para an√°lise:
         ```json
         {
           "new_videos": [
             {
               "account": "@username",
               "url": "https://instagram.com/reel/...",
               "published_at": "2024-01-15T10:30:00Z",
               "initial_metrics": {
                 "views": 1500,
                 "likes": 120,
                 "comments": 15
               },
               "triggers": ["new_video"],
               "priority": "high"
             }
           ],
           "total_found": 3,
           "requires_analysis": 2
         }
         ```
      
      **Crit√©rios de Prioriza√ß√£o:**
      - Alto engajamento inicial
      - Hashtags trending
      - Hor√°rio de publica√ß√£o estrat√©gico
      - Tipo de conte√∫do (reel vs post)
      
      Salve como: `novos_videos_{{timestamp}}.json`
    
    outputs:
      - name: "new_videos_list"
        description: "Lista de novos v√≠deos encontrados"
      - name: "analysis_queue"
        description: "Fila de v√≠deos para an√°lise"
    
    success_criteria:
      - "Verifica√ß√£o conclu√≠da para todas as contas"
      - "Novos v√≠deos identificados"
      - "Fila de an√°lise atualizada"

  - id: "auto_analyze_priority"
    name: "An√°lise Autom√°tica Priorit√°ria"
    description: "Analisa automaticamente v√≠deos de alta prioridade"
    agent: "claude-code"
    depends_on: ["check_new_content"]
    priority: "high"
    estimated_duration: "5-10min"
    condition: "{{check_new_content.analysis_queue.length > 0}}"
    
    prompt: |
      Execute an√°lise autom√°tica dos v√≠deos priorit√°rios:
      
      **Fila de An√°lise:**
      {{check_new_content.analysis_queue}}
      
      **Processo de An√°lise:**
      
      Para cada v√≠deo na fila de prioridade:
      
      1. üöÄ Iniciar an√°lise r√°pida:
         ```
         analyze_instagram_video(
           url=video_url,
           analysis_type="summary"  # An√°lise r√°pida para monitoramento
         )
         ```
      
      2. ‚ö° An√°lise express (foco em):
         - Tema principal
         - Elementos visuais chave
         - Potencial de engajamento
         - Hashtags e tend√™ncias
      
      3. üéØ Detectar padr√µes importantes:
         - Mudan√ßas na estrat√©gia de conte√∫do
         - Novos formatos ou estilos
         - Colabora√ß√µes ou parcerias
         - Campanhas ou promo√ß√µes
      
      4. üö® Gerar alertas se necess√°rio:
         - Conte√∫do viral potencial
         - Mudan√ßa significativa na estrat√©gia
         - Oportunidade de resposta r√°pida
         - Amea√ßa competitiva
      
      **Formato de Resultado:**
      ```json
      {
        "analyzed_videos": [
          {
            "url": "...",
            "account": "@username",
            "analysis_summary": "...",
            "key_insights": ["insight1", "insight2"],
            "alert_level": "medium",
            "recommended_actions": ["action1", "action2"]
          }
        ],
        "alerts_generated": 2,
        "total_processed": 3
      }
      ```
      
      Salve como: `analise_automatica_{{timestamp}}.json`
    
    outputs:
      - name: "analysis_results"
        description: "Resultados das an√°lises autom√°ticas"
      - name: "alerts"
        description: "Alertas gerados"
      - name: "recommended_actions"
        description: "A√ß√µes recomendadas"

  - id: "trend_detection"
    name: "Detec√ß√£o de Tend√™ncias"
    description: "Identifica tend√™ncias emergentes nos v√≠deos analisados"
    agent: "claude-code"
    depends_on: ["auto_analyze_priority"]
    priority: "medium"
    estimated_duration: "3min"
    
    prompt: |
      Analise tend√™ncias emergentes com base nos dados coletados:
      
      **Dados de Entrada:**
      {{auto_analyze_priority.analysis_results}}
      
      **An√°lise de Tend√™ncias:**
      
      ## üìà Detec√ß√£o de Padr√µes
      
      ### Tend√™ncias de Conte√∫do
      - Temas recorrentes: [an√°lise]
      - Formatos populares: [an√°lise]
      - Estilos visuais: [an√°lise]
      
      ### Tend√™ncias de Engajamento
      - Hor√°rios de maior engajamento: [an√°lise]
      - Tipos de conte√∫do com melhor performance: [an√°lise]
      - Hashtags em ascens√£o: [an√°lise]
      
      ### Tend√™ncias Competitivas
      - Estrat√©gias dos concorrentes: [an√°lise]
      - Gaps de oportunidade: [an√°lise]
      - Amea√ßas emergentes: [an√°lise]
      
      ## üéØ Insights Acion√°veis
      
      ### Oportunidades Imediatas
      - [Oportunidade 1]: [Descri√ß√£o + A√ß√£o]
      - [Oportunidade 2]: [Descri√ß√£o + A√ß√£o]
      
      ### Riscos Identificados
      - [Risco 1]: [Descri√ß√£o + Mitiga√ß√£o]
      - [Risco 2]: [Descri√ß√£o + Mitiga√ß√£o]
      
      ## üìä M√©tricas de Tend√™ncia
      - Velocidade de crescimento: [m√©trica]
      - Satura√ß√£o do mercado: [m√©trica]
      - Potencial de viraliza√ß√£o: [m√©trica]
      
      **Algoritmo de Detec√ß√£o:**
      1. Comparar com dados hist√≥ricos
      2. Identificar mudan√ßas significativas
      3. Calcular velocidade de ado√ß√£o
      4. Prever dura√ß√£o da tend√™ncia
      
      Salve como: `tendencias_{{timestamp}}.md`
    
    outputs:
      - name: "trend_report"
        description: "Relat√≥rio de tend√™ncias"
      - name: "opportunities"
        description: "Oportunidades identificadas"
      - name: "risks"
        description: "Riscos identificados"

  - id: "generate_alerts"
    name: "Gerar Alertas Inteligentes"
    description: "Cria alertas baseados em thresholds e padr√µes"
    agent: "claude-code"
    depends_on: ["trend_detection"]
    priority: "high"
    estimated_duration: "1min"
    
    prompt: |
      Gere alertas inteligentes baseados nos dados analisados:
      
      **Dados para Alertas:**
      - An√°lises: {{auto_analyze_priority.analysis_results}}
      - Tend√™ncias: {{trend_detection.opportunities}}
      - Riscos: {{trend_detection.risks}}
      
      **Thresholds Configurados:**
      {{alert_thresholds}}
      
      **Tipos de Alerta:**
      
      ### üö® Alertas Cr√≠ticos (A√ß√£o Imediata)
      - Conte√∫do viral emergente
      - Crise de reputa√ß√£o potencial
      - Oportunidade de trending
      - Amea√ßa competitiva direta
      
      ### ‚ö†Ô∏è Alertas Importantes (A√ß√£o em 24h)
      - Mudan√ßa na estrat√©gia de concorrente
      - Nova tend√™ncia emergente
      - Queda no engajamento
      - Oportunidade de colabora√ß√£o
      
      ### ‚ÑπÔ∏è Alertas Informativos (Monitorar)
      - Mudan√ßas graduais em m√©tricas
      - Novos formatos de conte√∫do
      - Altera√ß√µes em hashtags
      - Padr√µes sazonais
      
      **Formato de Alerta:**
      ```json
      {
        "alert_id": "alert_{{timestamp}}",
        "level": "critical|important|info",
        "title": "T√≠tulo do alerta",
        "description": "Descri√ß√£o detalhada",
        "data_source": "URL ou refer√™ncia",
        "recommended_action": "A√ß√£o espec√≠fica",
        "urgency": "immediate|24h|monitor",
        "stakeholders": ["marketing", "content", "social"]
      }
      ```
      
      **Canais de Notifica√ß√£o:**
      - Cr√≠ticos: Slack + Email + SMS
      - Importantes: Slack + Email
      - Informativos: Dashboard + Email semanal
      
      Gere apenas alertas relevantes e acion√°veis.
    
    outputs:
      - name: "alerts_generated"
        description: "Alertas gerados"
      - name: "notification_queue"
        description: "Fila de notifica√ß√µes"

  - id: "update_dashboard"
    name: "Atualizar Dashboard de Monitoramento"
    description: "Atualiza dashboard em tempo real com novos dados"
    agent: "claude-code"
    depends_on: ["generate_alerts"]
    priority: "low"
    estimated_duration: "1min"
    
    prompt: |
      Atualize o dashboard de monitoramento com os novos dados:
      
      **Dados para Dashboard:**
      - Novos v√≠deos: {{check_new_content.new_videos_list}}
      - An√°lises: {{auto_analyze_priority.analysis_results}}
      - Tend√™ncias: {{trend_detection.trend_report}}
      - Alertas: {{generate_alerts.alerts_generated}}
      
      **Se√ß√µes do Dashboard:**
      
      ### üìä Vis√£o Geral
      - Total de contas monitoradas: [N]
      - Novos v√≠deos hoje: [N]
      - An√°lises realizadas: [N]
      - Alertas ativos: [N]
      
      ### üìà M√©tricas em Tempo Real
      - Engajamento m√©dio: [%]
      - V√≠deos virais: [N]
      - Tend√™ncias ativas: [N]
      - Performance vs. ontem: [+/-]
      
      ### üéØ Alertas Ativos
      [Lista de alertas por prioridade]
      
      ### üìã A√ß√µes Recomendadas
      [Lista de a√ß√µes priorit√°rias]
      
      ### üìä Gr√°ficos e Visualiza√ß√µes
      - Timeline de atividade
      - Heatmap de engajamento
      - Gr√°fico de tend√™ncias
      - Comparativo de contas
      
      **Formato de Atualiza√ß√£o:**
      - Atualizar dados em tempo real
      - Manter hist√≥rico de 30 dias
      - Destacar mudan√ßas significativas
      - Incluir timestamps de √∫ltima atualiza√ß√£o
      
      Salve como: `dashboard_data_{{timestamp}}.json`
    
    outputs:
      - name: "dashboard_data"
        description: "Dados atualizados do dashboard"
      - name: "dashboard_url"
        description: "URL do dashboard atualizado"

# Configura√ß√µes de agendamento
schedule:
  type: "recurring"
  frequency: "{{monitoring_frequency}}"
  start_time: "09:00"
  timezone: "America/Sao_Paulo"
  max_runtime: "30min"

# Configura√ß√µes de notifica√ß√£o
notifications:
  critical_alerts:
    channels: ["slack", "email", "sms"]
    immediate: true
    
  important_alerts:
    channels: ["slack", "email"]
    delay: "5min"
    
  info_alerts:
    channels: ["dashboard"]
    batch: true
    frequency: "daily"
    
  system_status:
    channels: ["slack"]
    frequency: "weekly"
    message: "üìä Relat√≥rio semanal de monitoramento: {{dashboard_url}}"

# M√©tricas de monitoramento
metrics:
  - name: "contas_monitoradas"
    description: "N√∫mero de contas sendo monitoradas"
    unit: "count"
  
  - name: "videos_detectados"
    description: "Novos v√≠deos detectados por per√≠odo"
    unit: "count"
  
  - name: "taxa_analise_automatica"
    description: "Taxa de sucesso da an√°lise autom√°tica"
    unit: "percentage"
  
  - name: "alertas_gerados"
    description: "N√∫mero de alertas gerados por per√≠odo"
    unit: "count"
  
  - name: "tempo_resposta_alertas"
    description: "Tempo m√©dio de resposta a alertas"
    unit: "minutes"

# Configura√ß√µes de reten√ß√£o
data_retention:
  raw_data: "90 days"
  analysis_results: "1 year"
  dashboard_data: "30 days"
  alerts: "6 months"
